<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
    />
    <title>HomePage</title>
  </head>
  <body>
    <%- include('./patial/nav.ejs') %>
    <div class="container">
      <h4>item detail</h4>
      <div>
        <h5>item name: <%= item.name %></h5>
        <h5>item price: $<%= item.price %></h5>
      </div>
      <a id="deletebtn" href="" class="delete btn" data-id="<%=item._id%>"
        >Delete</a
      >
    </div>
    <script>
      deletebtn.onclick = (e) => {
        e.preventDefault();
        const id1 = deletebtn.dataset.id;
        // const id2 = e.target.getAttribute("data-id");
        // console.log("id1", id1, "id2", id2);
        const endPoint = `/items/${id1}`;
        fetch(endPoint, {
          method: "delete",
        })
          .then((data) => {
            return data.json();
          })
          .then((data) => {
             window.location.href= data.redirect
          })
          .catch((err) => {
            console.log(err.message);
          });
      };
    </script>
  </body>
</html>
